Index: app/src/main/java/com/example/ohurocchi/NameActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.ohurocchi\r\n\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.widget.Button\r\nimport android.widget.EditText\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.lifecycle.lifecycleScope\r\nimport com.google.android.material.textfield.TextInputEditText\r\nimport kotlinx.coroutines.Dispatchers\r\nimport kotlinx.coroutines.launch\r\nimport kotlinx.coroutines.withContext\r\nimport org.json.JSONException\r\nimport org.json.JSONObject\r\nimport java.io.BufferedReader\r\nimport java.io.IOException\r\nimport java.io.InputStreamReader\r\nimport java.net.URL\r\n\r\nclass NameActivity : AppCompatActivity() {\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_namechange)\r\n\r\n        val newName:EditText =findViewById(R.id.editTextTextPersonName)\r\n\r\n\r\n\r\n        val button = findViewById<Button>(R.id.button)\r\n        button.setOnClickListener {\r\n\r\n            val setName = newName.text.toString()\r\n\r\n            changeuserNameTask(setName)\r\n            val btnBack: Button = findViewById(R.id.btnBack)\r\n\r\n            btnBack.setOnClickListener {\r\n                finish()\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun changeuserNameTask(mainURL:String){\r\n        //コルーチンスコープの用意\r\n        lifecycleScope.launch{\r\n            //val result = changeuserNameBackgroundTask(mainURL)\r\n            changeuserNameBackgroundTask(mainURL)\r\n            //changeuserNameJsonTask(result)\r\n        }\r\n    }\r\n\r\n    private suspend fun changeuserNameBackgroundTask(mainURL:String):String{\r\n        val URL = \"http://172.22.113.55/huro_API/DBupdate.php?name=\"\r\n        val response = withContext(Dispatchers.IO){\r\n            // 天気情報サービスから取得した結果情報（JSON文字列）を後で入れるための変数（いったん空っぽ）を用意。\r\n            var httpResult = \"\"\r\n\r\n            //  try{エラーがあるかもしれない処理を実行}catch{実際エラーがあった場合}\r\n            try{\r\n                //ただのURL文字列をURLオブジェクトに変換（文字列にリンクを付けるイメージ）\r\n                val newURL = \"$URL$mainURL\"\r\n                Log.d(\"MyApp\",\"URL $newURL\")\r\n                val urlObj = URL(newURL)\r\n\r\n                // アクセスしたAPIから情報を取得\r\n                //テキストファイルを読み込むクラス(文字コードを読めるようにする準備(URLオブジェクト))\r\n                val br = BufferedReader(InputStreamReader(urlObj.openStream()))\r\n\r\n                //読み込んだデータを文字列に変換して代入\r\n                //httpResult =br.toString()\r\n                httpResult = br.readText()\r\n            }catch (e: IOException){//IOExceptionとは例外管理するクラス\r\n                Log.d(\"MyApp\",\"例外発生\")\r\n                e.printStackTrace() //エラーが発生したよって言う\r\n            }catch (e: JSONException){ //JSONデータ構造に問題が発生した場合の例外\r\n                Log.d(\"MyApp\",\"Json error\")\r\n                e.printStackTrace()\r\n            }\r\n            //HTTP接続の結果、取得したJSON文字列httpResultを戻り値とする\r\n            return@withContext httpResult\r\n        }\r\n        return response\r\n    }\r\n\r\n    private fun changeuserNameJsonTask(result: String){\r\n        val button1:Button = findViewById(R.id.button1)\r\n\r\n//        val JsonObj = JSONObject(result)\r\n//        Log.d(\"MyApp\",\"aaa $JsonObj\")\r\n//        //val array = JsonObj.getJSONArray(\"test0\")\r\n//        //Log.d(\"MyApp\",\"bbb $array\")\r\n//        val nameObj = JsonObj.getJSONObject(\"test0\")\r\n//        val text = nameObj.getString(\"user_name\")\r\n//        button1.text = text\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/ohurocchi/NameActivity.kt b/app/src/main/java/com/example/ohurocchi/NameActivity.kt
--- a/app/src/main/java/com/example/ohurocchi/NameActivity.kt	
+++ b/app/src/main/java/com/example/ohurocchi/NameActivity.kt	
@@ -52,7 +52,7 @@
     }
 
     private suspend fun changeuserNameBackgroundTask(mainURL:String):String{
-        val URL = "http://172.22.113.55/huro_API/DBupdate.php?name="
+        val URL = "http://192.168.3.79/huro_API/DBupdate.php?name="
         val response = withContext(Dispatchers.IO){
             // 天気情報サービスから取得した結果情報（JSON文字列）を後で入れるための変数（いったん空っぽ）を用意。
             var httpResult = ""
